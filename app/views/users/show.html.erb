

<h1 class="goal-index"> My open goals </h1>

    <% if !@goals %> 

        <%= link_to "Add your first goal!", new_goal_path %>

    <% else %>

    <div class="goal-index-container">

        <% @goals.not_completed.each do |goal| %>
                <div class="goal-index-description"> 
                    <%= link_to goal.description, goal_path(goal) %>
                </div>
                <div class="goal-index-result">
                    <%= goal.key_result %>
                </div>
                <div class="goal-index-date">
                    <%= deadline(goal) %> 
                </div>
        <% end %>

</div>

    <% end %>

<br><br><br>

<div class="flex-container">
    <div class="task-container user-page">

        <h2>My open tasks</h2>
        <hr class="solid">

            <% @user.ordered_open_tasks.each do |task| %>

                <div class ="task-complete">
                    <%= form_for task do |f| %>
                        <%= f.hidden_field :target, value: "home" %>
                        <%= f.hidden_field :complete, value: true %>
                        <%= f.submit value: " " %>
                    <% end %>
                </div>
                <div class="task-description">
                    <%= link_to task.description, edit_task_path(task) %>
                </div>
                <div class="task-date">
                    <% if task.by_when < Time.current %>
                        <div id="overdue">  <%= deadline(task) %> </div>
                    <% else %>
                        <%= deadline(task) %> 
                    <% end %>
                </div>
                
            <% end %>

    </div>

    <div class="task-container user-page">

        <h2>Goal snapshot:</h2>
        <hr class="solid">

            <% @user.categories.each do |category| %>

                <div class="task-description">
                    <%= category.name %>
                </div>
                <div class="task-date">
                    <%= category.goal_count(@user) %>
                </div>
                
            <% end %>

    </div>

</div>